<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vishnu Asokan | Cinematic Portfolio</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;font-family:Arial,sans-serif;}
canvas{display:block;}
.overlay{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%);
  color:#ff77aa;text-align:center;
  z-index:10;pointer-events:none;
}
.overlay h1{font-size:3rem;margin-bottom:10px;text-shadow:0 0 15px #ff77aa;}
.overlay p{font-size:1.2rem;opacity:0.85;}
a{color:#ffbbcc;text-decoration:none;}
</style>
</head>
<body>
<div class="overlay" id="overlay">
  <h1>Welcome to the New World</h1>
  <p>Frontend Developer | Vishnu Asokan</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.2/gsap.min.js"></script>

<script>
// ======= SCENE SETUP =======
let scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0x0f0f14,0.015);

let camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,5,20);

let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// LIGHTS
let ambient = new THREE.AmbientLight(0xffffff,0.5);
scene.add(ambient);
let dirLight = new THREE.DirectionalLight(0xffffff,0.8);
dirLight.position.set(10,20,10);
scene.add(dirLight);

// COLORFUL CITY
const colors = [0xff4d6d,0xffbb33,0x33ccff,0x77ff88,0xff88ff];
for(let i=0;i<100;i++){
  let geo = new THREE.BoxGeometry(Math.random()*2+1, Math.random()*5+2, Math.random()*2+1);
  let mat = new THREE.MeshPhongMaterial({color:colors[Math.floor(Math.random()*colors.length)]});
  let cube = new THREE.Mesh(geo,mat);
  cube.position.set((Math.random()-0.5)*100,geo.parameters.height/2,(Math.random()-0.5)*100);
  scene.add(cube);
}

// PARTICLES GLOW
let particleGroup = new THREE.Group();
for(let i=0;i<200;i++){
  let dotGeo = new THREE.SphereGeometry(0.07,4,4);
  let dotMat = new THREE.MeshBasicMaterial({color:colors[Math.floor(Math.random()*colors.length)],transparent:true,opacity:0.7});
  let dot = new THREE.Mesh(dotGeo,dotMat);
  dot.position.set((Math.random()-0.5)*80, Math.random()*15+1, (Math.random()-0.5)*80);
  particleGroup.add(dot);
}
scene.add(particleGroup);

// SPLINE PATH FOR CAMERA (ROLLER-COASTER)
const curve = new THREE.CatmullRomCurve3([
  new THREE.Vector3(0,5,20), // start
  new THREE.Vector3(10,7,0),
  new THREE.Vector3(-10,6,-20),
  new THREE.Vector3(15,8,-40),
  new THREE.Vector3(0,7,-60),
  new THREE.Vector3(-15,5,-80)
]);

let t = 0; // parameter along curve

const overlay = document.getElementById('overlay');
let sections = [
  {title:"About Me", text:"After BCA, I built real-world frontend projects, improving HTML, CSS, JS skills."},
  {title:"Projects", text:"Interactive Valentine Web App + more coming soon."},
  {title:"CV", text:"Education: BCA – Koshys Institute of Management Studies – 2022-2025<br>Skills: HTML, CSS, JS, Responsive Design, Git & GitHub, Basic APIs<br>Experience & Achievements: See portfolio projects"},
  {title:"Contact", text:"Email: <a href='mailto:vishnuasokan236@gmail.com'>vishnuasokan236@gmail.com</a>"}
];
let currentSection = -1;

// START CINEMATIC ON CLICK OR ENTER
document.addEventListener('click',startCinematic);
document.addEventListener('keydown', e=>{if(e.key==='Enter') startCinematic();});

function startCinematic(){
  document.removeEventListener('click',startCinematic);
  document.removeEventListener('keydown',startCinematic);
  gsap.to({}, {duration:15, onUpdate:updateCamera});
}

function updateCamera(){
  t += 0.0015;
  if(t>1) t=1;
  camera.position.copy(curve.getPointAt(t));
  camera.lookAt(curve.getPointAt(Math.min(t+0.02,1)));
  
  // Check for sections
  let sectionTrigger = [0.05,0.35,0.65,0.85];
  for(let i=0;i<sections.length;i++){
    if(t>=sectionTrigger[i] && currentSection<i){
      currentSection=i;
      overlay.innerHTML = `<h1>${sections[i].title}</h1><p>${sections[i].text}</p>`;
    }
  }
}

// ANIMATE PARTICLES
function animate(){
  requestAnimationFrame(animate);
  particleGroup.rotation.y += 0.0015;
  renderer.render(scene,camera);
}
animate();

// RESIZE
window.addEventListener('resize', ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
